#------------------------------------------------------------------------------
# Makefile
# Для cборки projectTMG
#------------------------------------------------------------------------------
# Компиляторы
CC = g++
OC = gcc
# Флаги транслятора
CF = -c -Wall
# Префикс компоновщика
PR = -framework
# Для компиляции Objective-C поиска путей до файла
OO = -framework Foundation
# Опции линковки с SFML библиотеками/фреймворками
LF = $(PR) sfml-window $(PR) sfml-graphics $(PR) sfml-system $(PR) sfml-audio
# Имя исполняемого файла
OF = game
#------------------------------------------------------------------------------
MPATH = modules/
DG = Debug/
#------------------------------------------------------------------------------
all: $(DG)$(OF)
#------------------------------------------------------------------------------
debug: CF += -DDEBUG
debug: $(DG)$(OF)
#------------------------------------------------------------------------------
# Скомпилировать main.cpp
$(DG)main.o: main.cpp macros.h
	$(CC) $(CF) -o $(DG)main.o main.cpp
#------------------------------------------------------------------------------
# Скомпилировать engine.cpp
$(DG)engine.o: $(MPATH)engine.cpp $(MPATH)engine.hpp
	$(CC) $(CF) -o $(DG)engine.o $(MPATH)engine.cpp
#------------------------------------------------------------------------------
# Скомпилировать pathfinder
$(DG)pathfinder.o: $(MPATH)pathfinder.mm $(MPATH)pathfinder.hpp
	$(OC) $(CF) -o $(DG)pathfinder.o $(MPATH)pathfinder.mm
#------------------------------------------------------------------------------
# Скомпилировать tinyxml2
$(DG)tinyxml2.o: $(MPATH)tinyxml2.cpp $(MPATH)tinyxml2.hpp
	$(CC) $(CF) -o $(DG)tinyxml2.o $(MPATH)tinyxml2.cpp
#------------------------------------------------------------------------------
# Скомпилировать loadRes
$(DG)loadRes.o: $(MPATH)loadRes.cpp $(MPATH)loadRes.hpp $(DG)tinyxml2.o
	$(CC) $(CF) -o $(DG)loadRes.o $(MPATH)loadRes.cpp
#------------------------------------------------------------------------------
# Залинковать все в один исполняемый файл
$(DG)$(OF): $(DG)main.o $(DG)pathfinder.o $(DG)tinyxml2.o $(DG)loadRes.o $(DG)engine.o
	$(CC) $(LF) $(OO) -o $(DG)$(OF) $(DG)main.o \
	$(DG)pathfinder.o $(DG)loadRes.o $(DG)tinyxml2.o $(DG)engine.o
#------------------------------------------------------------------------------
# Удалить все object-файлы и исполняемый файл проекта
clean:
	rm -rf $(DG)*.o $(DG)$(OF)
#------------------------------------------------------------------------------
# Запустить исполняемый файл
run: $(DG)$(OF)
	./start ./Frameworks
#------------------------------------------------------------------------------